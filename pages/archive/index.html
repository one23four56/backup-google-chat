<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap");

    body {
      display: inline-flex;
      width: 100%;
      height: 100%;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      overflow: hidden;
      color: white;
      background-color: hsl(0, 0%, 15%);
    }

    h1,
    label,
    p,
    input {
      font-family: 'Open Sans', sans-serif;
    }

    input[type=submit] {
      padding: 0.5em;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1.25em;
      width: 100%;
    }

    input {
      background-color: hsl(0, 0%, 30%);
      color: white;
      border: none;
      border-radius: 5px;
      padding: 0.25em;
    }

    fieldset {
      padding: 1em;
      border: none;
      border-radius: 10px;
      background-color: hsl(0, 0%, 20%);
      line-height: 2;
    }
  </style>
  <title>$RoomName$ Archive - Backup Google Chat</title>
</head>

<body>

  <h1>$RoomName$ Archive Loader</h1>

  <form action="archive/view">
    <fieldset>
      <label for="start">
        Start at message
        #<input type="number" name="start" id="start" placeholder="enter a number" min="0" required>
      </label>
      <br>
      <label for="count">
        Show the next
        <input type="number" name="count" id="count" placeholder="enter a number" min="1" required>
        messages
      </label>
      <br>
      <label for="focus">
        Highlight message
        #<input type="number" name="focus" id="focus" placeholder="enter a number" min="0">
        (optional)
      </label>
    </fieldset>
    <br>
    <fieldset>
      <label for="reverse">
        <input type="checkbox" name="reverse" id="reverse">
        Reverse Mode
        (message #0 is the latest message sent instead of the first message sent)
      </label>
    </fieldset>
    <br>
    <input type="submit" value="Load" id="submit">
  </form>
  
  <script>
      const id = id => document.getElementById(id);
      const message = new URLSearchParams(window.location.search).get('message');
      
      if (message) {
        id('start').value = Number(message) - 50 >= 0 ? Number(message) - 50 : 0;
        id('count').value = 100;
        id('focus').value = Number(message);

        id('submit').focus()
      }
  </script>
</body>

</html>